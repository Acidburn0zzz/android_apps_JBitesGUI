#!/system/bin/sh
# 3G TurboCharger created by zeppelinrox.
cat > /sdcard/3GTurboCharger.txt <<EOF
QUICK!
ro.ril.hsxpa=2
ro.ril.gprsclass=10
ro.ril.hep=1
ro.ril.hsdpa.category=8
ro.ril.enable.3g.prefix=1
ro.ril.htcmaskw1.bitmask=4294967295
ro.ril.htcmaskw1=14449
ro.ril.hsupa.category=6
ro.ril.def.agps.mode=2
ro.ril.def.agps.feature=1
ro.ril.enable.sdr=1
ro.ril.enable.gea3=1
ro.ril.enable.fd.plmn.prefix=23402,23410,23411
ro.ril.disable.power.collapse=0
ro.ril.enable.a52=0
ro.ril.enable.a53=0
ro.ril.enable.dtm=0

FAST!?
ro.ril.hsxpa=2
ro.ril.gprsclass=12
ro.ril.hep=1
ro.ril.hsdpa.category=8
ro.ril.enable.3g.prefix=1
ro.ril.htcmaskw1.bitmask=4294967295
ro.ril.htcmaskw1=14449
ro.ril.hsupa.category=6
ro.ril.def.agps.mode=2
ro.ril.def.agps.feature=1
ro.ril.enable.sdr=1
ro.ril.enable.gea3=1
ro.ril.enable.fd.plmn.prefix=23402,23410,23411
ro.ril.disable.power.collapse=0
ro.ril.enable.a52=0
ro.ril.enable.a53=0
ro.ril.enable.dtm=0

FASTER!? (Update 2)
ro.ril.hsxpa=2
ro.ril.gprsclass=12
ro.ril.hep=1
ro.ril.hsdpa.category=28
ro.ril.enable.3g.prefix=1
ro.ril.htcmaskw1.bitmask=4294967295
ro.ril.htcmaskw1=14449
ro.ril.hsupa.category=9
ro.ril.def.agps.mode=2
ro.ril.def.agps.feature=1
ro.ril.enable.sdr=1
ro.ril.enable.gea3=1
ro.ril.enable.fd.plmn.prefix=23402,23410,23411
ro.ril.disable.power.collapse=0
ro.ril.enable.a52=0
ro.ril.enable.a53=1
ro.ril.enable.dtm=1

FASTEST!? (Update 3 test 8)
ro.ril.hsxpa=3
ro.ril.gprsclass=32
ro.ril.hep=1
ro.ril.hsdpa.category=28
ro.ril.enable.3g.prefix=1
ro.ril.htcmaskw1.bitmask=4294967295
ro.ril.htcmaskw1=268449905
ro.ril.hsupa.category=9
ro.ril.def.agps.mode=2
ro.ril.def.agps.feature=1
ro.ril.enable.sdr=1
ro.ril.enable.gea3=1
ro.ril.enable.fd.plmn.prefix=23402,23410,23411
ro.ril.disable.power.collapse=0
ro.ril.enable.a52=0
ro.ril.enable.a53=1
ro.ril.enable.dtm=1

EXPERIMENTAL 1!
ro.ril.hsxpa=5
ro.ril.gprsclass=34
ro.ril.hep=1
ro.ril.hsdpa.category=28
ro.ril.enable.3g.prefix=1
ro.ril.htcmaskw1.bitmask=4294967295
ro.ril.htcmaskw1=268449905
ro.ril.hsupa.category=9
ro.ril.def.agps.mode=2
ro.ril.def.agps.feature=1
ro.ril.enable.sdr=1
ro.ril.enable.gea3=1
ro.ril.enable.fd.plmn.prefix=23402,23410,23411
ro.ril.disable.power.collapse=0
ro.ril.enable.a52=1
ro.ril.enable.a53=1
ro.ril.enable.dtm=1

EXPERIMENTAL 2!
ro.ril.hsxpa=
ro.ril.gprsclass=
ro.ril.hep=1
ro.ril.hsdpa.category=
ro.ril.enable.3g.prefix=1
ro.ril.htcmaskw1.bitmask=
ro.ril.htcmaskw1=
ro.ril.hsupa.category=
ro.ril.def.agps.mode=2
ro.ril.def.agps.feature=1
ro.ril.enable.sdr=1
ro.ril.enable.gea3=1
ro.ril.enable.fd.plmn.prefix=23402,23410,23411
ro.ril.disable.power.collapse=0
ro.ril.enable.a52=
ro.ril.enable.a53=
ro.ril.enable.dtm=
EOF
line=================================================
speed=2
sleep="sleep $speed"
clear
echo ""
echo $line
echo " NOTE: BUSYBOX v1.16.2 OR HIGHER IS RECOMMENDED!"
echo $line
echo ""
sleep 3
clear;echo "";echo "";echo " The...";echo "";echo "";echo "";echo "";$sleep
clear;echo "";echo "";echo " The...";echo "                3";echo "";echo "";echo "";$sleep
clear;echo "";echo "";echo " The...";echo "                3G";echo "";echo "";echo "";$sleep
clear;echo "";echo "";echo " The...";echo "              -=3G TurboCharger=-";echo "";echo "";echo "";$sleep
clear;echo "";echo "";echo " The...";echo "              -=3G TurboCharger=-";echo " by:";echo "";echo "                                        zOOM...";$sleep
clear;echo "";echo $line;echo " The...";echo "              -=3G TurboCharger=-";echo " by:";echo "                -=zeppelinrox=-";echo " zOOm...                                zOOM..."
while :
do
 echo $line
 $sleep
 echo " \\\\\\ 3 G  T U R B O C H A R G E R - M E N U ///"
 echo "  ============================================"
 echo "  1. Quick        {Battery Friendly 3G Values}"
 echo "  2. Fast!?               {\"Normal\" 3G Values}"
 echo "  3. Faster!?        {Nearly Maxed Out Values}"
 echo "  4. Fastest!?        {Known Maxed Out Values}"
 echo "  5. Experimental 1{\"Secret\" Maxed Out Values}"
 echo "  6. Experimental 2            {Nulled Values}"
 echo "  7. UnTurboCharger                          }"
 echo "  8. Wi-Fixer                                }"
 echo "  9. Get SpeedTest.Net App!     {Opens Market}"
 echo " 10. Gimme Some Sugar            {Gotta Buck?}"
 echo " 11. REBOOT!  {WARNING - There is NO Warning!}"
 echo " 12. Exit"
 echo $line
 echo ""
 echo " Your Mileage WILL Vary!"
 echo ""
 echo " View settings in /sdcard/3GTurboCharger.txt!"
 echo ""
 echo " Settings are applied at the top of build.prop!"
 echo ""
 echo " Test all 5 to see which works best for you!"
 echo ""
 echo " The SpeedTest.Net app is highly recommended :)"
 echo ""
 echo -n " Please enter option [1 - 12]: "
 read turboopt
 echo ""
 echo $line
 echo "            \\\\\\\\ 3G TURBOCHARGER ////"
 echo "             ======================="
 echo ""
 $sleep
 if [ "$turboopt" -lt 11 ] 2>/dev/null; then
	busybox mount -o remount,rw /system 2>/dev/null
	for m in /dev/block/mtdblock*
	do
	busybox mount -o remount,rw $m /system 2>/dev/null
	done
 fi
 case $turboopt in
  1) echo "                      QUICK!"
	 hsxpa=2;gprsclass=10;hsdpa=8;bitmask=4294967295;htcmaskw1=14449;hsupa=6;afivetwo=0;afivethree=0;dtm=0;;
  2) echo "                      FAST!?"
	 hsxpa=2;gprsclass=12;hsdpa=8;bitmask=4294967295;htcmaskw1=14449;hsupa=6;afivetwo=0;afivethree=0;dtm=0;;
  3) echo "                     FASTER!?"
	 hsxpa=2;gprsclass=12;hsdpa=28;bitmask=4294967295;htcmaskw1=14449;hsupa=9;afivetwo=0;afivethree=1;dtm=1;;
  4) echo "                     FASTEST!?"
	 hsxpa=3;gprsclass=32;hsdpa=28;bitmask=4294967295;htcmaskw1=268449905;hsupa=9;afivetwo=0;afivethree=1;dtm=1;;
  5) echo "                 EXPERIMENTAL 1!"
	 hsxpa=5;gprsclass=34;hsdpa=28;bitmask=4294967295;htcmaskw1=268449905;hsupa=9;afivetwo=1;afivethree=1;dtm=1;;
  6) echo "                 EXPERIMENTAL 2!"
	 hsxpa=;gprsclass=;hsdpa=;bitmask=;htcmaskw1=;hsupa=;afivetwo=;afivethree=;dtm=;;
  7) echo "             ======================"
	 echo "            //// UNTURBOCHARGER \\\\\\\\";;
  8) echo "                ================"
	 echo "               //// WI-FIXER \\\\\\\\"
	 echo $line
	 echo ""
	 echo " If Wi-Fi doesn't work after using..."
	 echo ""
	 $sleep
	 echo "                ...The 3G TurboCharger..."
	 echo ""
	 $sleep
	 echo "                          ...this MIGHT fix it!"
	 echo ""
	 $sleep
	 echo " This will simply rename wpa_supplicant.conf..."
	 echo ""
	 $sleep
	 echo "               ...so that a new one is created!"
	 echo ""
	 $sleep
	 echo " First, Turn Wifi OFF..."
	 echo ""
	 $sleep
	 echo "            ...Apply The WiFi-xer..."
	 echo ""
	 $sleep
	 echo "                          ...then Turn WiFi ON!"
	 echo ""
	 $sleep
	 echo $line
	 echo " Note: You will need to re-enter WiFi passwords!"
	 echo $line
	 echo ""
	 $sleep
	 echo " This will overwrite previously renamed file!"
	 echo ""
	 $sleep
	 echo " Un-Wi-Fixer will restore the renamed file!"
	 echo ""
	 echo $line
	 echo ""
	 $sleep
	 while :
	 do
		echo -n " Enter 1 (Wi-Fixer) 2 (Un-Wi-Fixer) 3 (Exit): "
		read wifixer
		echo ""
		case $wifixer in
		  1)echo $line
			if [ -f "/data/misc/wifi/wpa_supplicant.conf" ]; then
				cp -fr /data/misc/wifi/wpa_supplicant.conf /data/misc/wifi/wpa_supplicant.conf.un3g
				rm /data/misc/wifi/wpa_supplicant.conf
				echo " Current wpa_supplicant.conf was saved..."
				echo ""
				$sleep
				echo " ...as /data/misc/wifi/wpa_supplicant.conf.un3g"
			else
				echo " oops... did NOT find wpa_supplicant.conf!"
			fi
			break;;
		  2)echo $line
			if [ -f "/data/misc/wifi/wpa_supplicant.conf.un3g" ]; then
				cp -fr /data/misc/wifi/wpa_supplicant.conf.un3g /data/misc/wifi/wpa_supplicant.conf
				echo " wpa_supplicant.conf was restored!"
			else
				echo " oops... did NOT find wpa_supplicant.conf.un3g!"
			fi
			break;;
		  3)echo $line
			echo " Returning to main menu..."
			break;;
		  *)echo "      Invalid entry... Please try again :)"
			echo ""
			$sleep;;
		esac
	 done;;
  9) echo $line
	 echo ""
	 echo " Loading Market..."
	 echo ""
	 $sleep
	 am start http://market.android.com/details?id=org.zwanoo.android.speedtest
	 echo "";;
 10) echo "                 ==============="
	 echo "                //// DONATE! \\\\\\\\"
	 echo $line
	 echo ""
	 $sleep
	 echo " Gimme some sugar, baby..."
	 echo ""
	 $sleep
	 echo "                    ...before my hand goes bad!"
	 echo ""
	 $sleep
	 echo " I've done ALOT of work to make this GREAT..."
	 echo ""
	 $sleep
	 echo "            ...possibly the BEST script EVER..."
	 echo ""
	 $sleep
	 echo "    ...hours, weeks, months... almost a YEAR..."
	 echo ""
	 $sleep
	 echo " So if you think I deserve a few bucks..."
	 echo ""
	 $sleep
	 echo "                       ...I'd have to agree! :D"
	 echo ""
	 $sleep
	 echo " Come give some! hehe..."
	 echo ""
	 $sleep
	 echo "                                   ...AOD FTW!!"
	 echo ""
	 $sleep
	 am start http://forum.xda-developers.com/donatetome.php?u=3357461
	 echo " I hope you helped! :)"
	 echo "";;
 11) echo $line
	 echo "                    !!POOF!!"
	 echo $line
	 echo ""
	 sync
	 echo 1 > /proc/sys/kernel/sysrq
	 echo b > /proc/sysrq-trigger
	 $sleep
	 echo "  If it don't go poofie, just reboot manually!"
	 echo ""
	 reboot;;
 12) echo " Did you find this useful? Feedback is welcome!";;
  *) echo "      Invalid entry... Please try again..."
	 echo ""
	 sleep 2
	 echo "            1 <= Valid Option => 12 !!"
	 echo ""
	 sleep 2
	 echo -n "        Press Enter key to continue... ;) "
	 read enterKey
	 turboopt=0;;
 esac
if [ "$turboopt" -ge 1 ] && [ "$turboopt" -le 12 ]; then
	echo $line
	echo ""
	$sleep
	if [ "$turboopt" -le 7 ]; then
		if [ "$turboopt" -ne 7 ]; then
			if [ -f "/system/build.prop.unsuper" ]; then
				echo " Leaving ORIGINAL build.prop backup intact..."
			else
				echo " Backing up ORIGINAL build.prop..."
				echo ""
				$sleep
				cp -r /system/build.prop /system/build.prop.unsuper
				echo "              ...as /system/build.prop.unsuper!"
			fi
			if [ -f "/system/bin/build.prop" ] && [ ! -f "/system/bin/build.prop.unsuper" ]; then
				cp -r /system/bin/build.prop /system/bin/build.prop.unsuper
			fi
			echo ""
			$sleep
		fi
		sed -i '/TurboCharger/,/TurboCharged/d' /system/build.prop
		if [ "$turboopt" -ne 7 ]; then
			sed -i '3i\# 3G TurboCharger by zeppelinrox.' /system/build.prop
			sed -i '/TurboCharger/ a\
# DO NOT DELETE COMMENTS. DELETING COMMENTS WILL BREAK UNINSTALL ROUTINE!\
# Homework... see links for resources used.\
# http://forum.xda-developers.com/showthread.php?t=595108\
# http://forum.xda-developers.com/showthread.php?t=924440\
# http://forum.xda-developers.com/showpost.php?p=5123531&postcount=46\
# http://www.nickshertzer.com/wordpress/?p=600\
ro.ril.hsxpa='$hsxpa'\
ro.ril.gprsclass='$gprsclass'\
ro.ril.hep=1\
ro.ril.hsdpa.category='$hsdpa'\
ro.ril.enable.3g.prefix=1\
ro.ril.htcmaskw1.bitmask='$bitmask'\
ro.ril.htcmaskw1='$htcmaskw1'\
ro.ril.hsupa.category='$hsupa'\
ro.ril.def.agps.mode=2\
ro.ril.def.agps.feature=1\
ro.ril.enable.sdr=1\
ro.ril.enable.gea3=1\
ro.ril.enable.fd.plmn.prefix=23402,23410,23411\
ro.ril.disable.power.collapse=0\
ro.ril.enable.a52='$afivetwo'\
ro.ril.enable.a53='$afivethree'\
ro.ril.enable.dtm='$dtm'\
# To fix connection issues, change "enable.a53" and "enable.dtm" to be =0\
# End of 3G TurboCharged Entries' /system/build.prop
			echo " 3G TurboCharger settings installed..."
		else
			echo " UnTurboCharging Complete..."
		fi
		echo ""
		$sleep
		echo "                            ...Reboot required!"
		echo ""
		echo $line
		echo ""
		$sleep
		if [ -f "/system/bin/build.prop" ]; then
			cp -fr /system/build.prop /system/bin/build.prop
		fi
#		chmod 644 /system/build.prop
#		chmod 644 /system/bin/build.prop
	fi
	echo " The 3G TurboCharger Installer..."
	echo ""
	$sleep
	echo "                      ...and WiFi-xer..."
	echo ""
	$sleep
	echo "     ...by -=zeppelinrox=- @ XDA & Droid Forums"
	$sleep
	if [ "$turboopt" -eq 12 ]; then
		echo ""
		echo "                                     Buh Bye :)"
		echo ""
		echo $line
		echo ""
		$sleep
		exit 0
	fi
	busybox mount -o remount,ro /system 2>/dev/null
	for m in /dev/block/mtdblock*
	do
	busybox mount -o remount,ro $m /system 2>/dev/null
	done
fi
echo ""
done
